<!DOCTYPE html>
<html ng-app="awkwardAssist" ng-controller="MainCtrl as main">
<head lang="en">
    <meta charset="UTF-8">
    <title>Awkward Assist</title>
    <link rel="stylesheet" type="text/css" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/normalize.css">
    <link type="text/css" rel="stylesheet" href="styles/main.css">
    <link type="text/css" rel="stylesheet" href="styles/modal.css">
    <link rel='stylesheet' type='text/css' href='/styles/chatSidebar.css'>
    <link type="text/css" rel="stylesheet" href="/styles/footer.css">
    <link rel="stylesheet" type="text/css" href="/styles/newRoomModal.css">
    <link rel="stylesheet" type="text/css" href="/styles/setCurrentUserModal.css">
    <link type="text/css" rel="stylesheet" href="styles/chatroom.css">
    <link rel="stylesheet" type="text/css" href="styles/insertable.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.0.4/firebase.js"></script>
    <script>
        var config = {
            apiKey: "AIzaSyBgjDHluQhaDVw727m2cPpbGGi14NzsAtY",
            authDomain: "crackling-inferno-7707.firebaseapp.com",
            databaseURL: "https://crackling-inferno-7707.firebaseio.com"
        }
        firebase.initializeApp(config);
        var rootRef = firebase.database().ref();
    </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/2.0.0/angularfire.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.13/angular-ui-router.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.2/ui-bootstrap-tpls.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-cookies.js"></script>
    <script src="/scripts/app.js"></script>
    <script src="/scripts/run.js"></script>
    <script src="/scripts/controllers/MainCtrl.js"></script>
    <script src="/scripts/controllers/ChatSidebarCtrl.js"></script>
    <script src="/scripts/controllers/ChatroomCtrl.js"></script>
    <script src="/scripts/controllers/NewRoomModalCtrl.js"></script>
    <script src="/scripts/controllers/SetCurrentUserModalCtrl.js"></script>
    <script src="/scripts/controllers/InsertableCtrl.js"></script>
    <script src="/scripts/services/room.js"></script>
    <script src="/scripts/services/message.js"></script>
    <script src="/scripts/services/insertable.js"></script>
    <script src="/scripts/services/insertables/smackTalk.js"></script>
    <script src="/scripts/services/insertables/breakUps.js"></script>
    <script src="/scripts/services/insertables/compliments.js"></script>
    <script src="/scripts/services/insertables/excusesToLeave.js"></script>
    <script src="/scripts/services/insertables/jokes.js"></script>
    <script src="/scripts/services/insertables/subjectChanges.js"></script>
    <script src="/scripts/filters/sentAt.js"></script>
    
    <script src="/templates/setCurrentUserModal.html"></script>
</head>
<body>
    
    <aside class="chatroom-sidebar" ng-controller="ChatSidebarCtrl as chatSidebar">
        <header class="chatroom-sidebar-header">Awkward Assist</header>
        <button class="new-chatroom-button" ng-click="chatSidebar.openNewRoomModal()">New room</button>
        <ul class="chatroom-list">
            <li class="chatroom-list-item" ng-repeat="room in chatSidebar.rooms" ng-click="chatSidebar.selectActiveRoom(room)">{{ room.name }}</li>
        </ul>
    </aside>
    
    <section ng-controller="ChatroomCtrl as chatroom">
        <header class="chatroom-header">
            <div id="header-room-container">
                <h4 id="header-room-text" ng-show="chatroom.activeRoom">Room: {{ chatroom.activeRoom.name }}</h4>
            </div>
            <div id="header-username-container">
                <h4 id="header-username-text">
                    User: {{ username }}
                    <br />
                    <a id="header-change-username" ng-click="chatroom.openSetCurrentUserModal()">Change Username</a>
                </h4>
            </div>
        </header>
        <section class="chatroom-messages-container">
            <div class="chatroom-message" ng-repeat="message in chatroom.activeRoomMessages" ng-class="{even: $even, odd: $odd}">
                <span class="chatroom-message username">{{ message.username }}<span class="sent-at">{{ message.sentAt | SentAt }}</span></span>
                <span class="chatroom-message content">{{ message.content }}</span>
            </div>
        </section>
        <footer>
            <form ng-submit="chatroom.addMessage(chatroom.newMessageContent)">
                <input id="footer-text-input" type="text" placeholder="Enter message here..." ng-model="chatroom.newMessageContent">
                <input id="footer-submit" type="submit" value="Enter">
            </form>
        </footer>
    </section>
    
    <section class="insertable-container" ng-controller="InsertableCtrl as Insertable">
            <button class="insertable-button">
                <span class="ion-help-buoy"></span>
            </button>
            <menu class="insertable-menu">

            </menu>
    </section>
    
    <script src="/scripts/chatroom.js"></script>
    <script src="/scripts/insertableMenu.js"></script>
</body>
</html>